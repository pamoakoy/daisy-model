2002-12-16  Per Abrahamsen  <abraham@dina.kvl.dk>

	* Version 2.39 released.

2002-12-16  Per Abrahamsen  <abraham@dina.kvl.dk>

	* txt/tutorial.tex (subsection{Horizons}): New description 

	* soil.C (load_syntax): Changed default dispersivity from 5 to 6. 

2002-12-13  Per Abrahamsen  <abraham@dina.kvl.dk>

	* surface.C: Don't include `am.h'.
	* daisy.C: Ditto.

	* lib/fertilizer.dai (slurry): Use Sander parameters.
	* bioincorporation.C (load_syntax): Ditto
	* am.C (default_AM): Ditto.
        * Updated crop parameterizations as well.
	
2002-12-11  Per Abrahamsen  <abraham@dina.kvl.dk>

	* organic_matter.C (load_syntax): New parameters from Sander Bruun.

2002-12-10  Per Abrahamsen  <abraham@dina.kvl.dk>

	* organic_matter.C (load_syntax): Added more documentation to
	`water_factor'. 

2002-11-04  Per Abrahamsen  <abraham@dina.kvl.dk>

	* weather_std.C (initialize): Changed errors for unreasonable
	precipitation corrections to warnings.

2002-10-15  Per Abrahamsen  <abraham@dina.kvl.dk>

	* macro_std.C (tick): Fix check.

	* Merged SHA changes.
	
2002-10-14  Per Abrahamsen  <abraham@dina.kvl.dk>

	* macro_std.C (tick): More debug information.

2002-10-11  Per Abrahamsen  <abraham@dina.kvl.dk>

	* log.C: Include tmpstream.h in order to get ostream.

2002-10-10  Per Abrahamsen  <abraham@dina.kvl.dk>

	* assertion.h: Don't use __FUNCTION__ on any Borland version.

	* Merged SHA changes.

2002-10-01  Per Abrahamsen  <abraham@dina.kvl.dk>

	* Version 2.38 released.

2002-09-19  Per Abrahamsen  <abraham@dina.kvl.dk>

	* vegetation_crops.C (DM_by_name): Support crop name "all".
	* condition_crop.C (ConditionCropSyntax): Document it.

2002-08-14  Per Abrahamsen  <abraham@dina.kvl.dk>

	* om.C (turnover): Make it more robust by leaving 1 [ug/l].

	* action_repeat.C (ActionRepeatSyntax): Fix gramtical error.

	* organic_matter.C (clayom): Removed const for BCC5.0.

2002-08-13  Per Abrahamsen  <abraham@dina.kvl.dk>

	* Version 2.37 released.

	* aom.C, column_std.C, om.C, om.h, smb.C, smb.h: More clayom
	modifications. 
	
2002-08-09  Per Abrahamsen  <abraham@dina.kvl.dk>

	* clayom_biomod.C: New model.
	* Makefile (MODELS): Add it.

2002-08-08  Per Abrahamsen  <abraham@dina.kvl.dk>

	* clayom_old.C: New model.
	* Makefile (MODELS): Add it.
	* clayom.C, clayom.h: New component.
	* Makefile (COMPONENTS): Add it.
	* organic_matter.C, organic_matter.h: Use it.

2002-08-02  Per Abrahamsen  <abraham@dina.kvl.dk>

	* Version 2.36 released.

2002-07-23  Per Abrahamsen  <abraham@dina.kvl.dk>

	* parser_file.C (add_derived): Better error message.

	* lib/log.dai ("DOM-N", "DOM-C"): New log models.

2002-07-22  Per Abrahamsen  <abraham@dina.kvl.dk>

	* am.C (AM_Syntax): Handle single OM pool.

2002-07-03  Per Abrahamsen  <abraham@dina.kvl.dk>

	* units.C (standard_conversions): Added "MJ/d/m^2".
	(standard_conversions): Added "m/s".

	* Version 2.35 released.

2002-07-01  Per Abrahamsen  <abraham@dina.kvl.dk>

	* canopy_std.C (cut): Take WStem parameter.
	* crop_std.C (harvest): Update caller.

	* hydraulic_B_C.C, hydraulic_M_C.C (b): Fixed range.

2002-06-28  Per Abrahamsen  <abraham@dina.kvl.dk>

	* lib/pea.dai, lib/srape.dai (LeafAIMod): Comment out.

	* dom.C, dom.h (C_source, N_source): New functions.
	(C_drain, N_drain): Removed.
	* organic_matter.C (tick): Use them
	* organic_matter.C (tick): Removed DOM transport.
	* organic_matter.C, organic_matter.h (transport): New function.
	* column_std.C (tick): Call it.

2002-06-25  Per Abrahamsen  <abraham@dina.kvl.dk>

	* assertion.C, assertion.h (bug): New member function.
	* assertion.h (daisy_bug): New macro.
	* groundwater_pipe.C: Use them.
	* groundwater.C, groundwater.h (update_water): Don't take Treelog
	argument. 
	* soil_water.C (tick): Update caller.

2002-06-21  Per Abrahamsen  <abraham@dina.kvl.dk>

	* dom.C: More work.
	* organic_matter.C (tick): Fix caller.

	* units.C: Allow conversions to ignore identical timestep.
	* select.C (initialize): Try conversion with 'h' as timestep.

	* lib/log.dai ("DOM Pools"): New log model.

2002-06-20  Per Abrahamsen  <abraham@dina.kvl.dk>

	* lib/log.dai ("Organic Matter"): Removed DOM.

2002-06-18  Per Abrahamsen  <abraham@dina.kvl.dk>

	* dom.C (tock): New function.
	(turnover): Call it.  Take new soil and soil water arguments.
	* organic_matter.C (tick): Update caller.

2002-06-06  Per Abrahamsen  <abraham@dina.kvl.dk>

	* Version 2.34 released.

2002-06-06  Per Abrahamsen  <abraham@dina.kvl.dk>

	* dom.h, dom.C: Rewrote.
	* aom.C, organic_matter.C, om.C:  Update callers.
	* organic_matter.C, organic_matter.h (mix, swap): Take SoilWater
	argument. 
	* column_std.C (mix, swap): Update caller.
	* organic_matter.C, organic_matter.h (initialize): Take SoilWater
	argument. 
	* column_std.C (initialize): Update caller.

2002-06-05  Per Abrahamsen  <abraham@dina.kvl.dk>

	* transport.h, transport_cd.C, transport_none.C,
	transport_convection.C (tick): Avoid Solute argument.
	* solute.C (tick): Update caller.

	* Version 2.33 released.

2002-06-04  Per Abrahamsen  <abraham@dina.kvl.dk>

	* am.C, am.h (default_AM): Renamed from default_AOM.
	* som.C, som.h, smb.C, smb.h, aom.C, aom.h, dom.C, dom.h: New
	submodels.
	* Makefile (SUBMODELS): Add it.
	(SPECIALS): Moved om.C here.
	* om.C, om.h (tick): Update callers.
	* am.C, organic_matter.C: Update users.
	* vegetation_permanent.C, bioincorporation.C: Update callers.
	* crop_old.C, crop_sold.C, crop_simple.C: Ditto.
	* harvesting.C: Ditto.

2002-06-03  Per Abrahamsen  <abraham@dina.kvl.dk>

	* lib/log.dai ("Organic Matter"): Added DOM.

	* om.C (goal_C_per_N): New variable.
	* organic_matter.C (initialize): Initialize it.
	* om.C (find_abiotic): New overloaded function.
	(tick): Call it.  Take dom arguments.
	* organic_matter.C (tick): dom turnover.
	(check_alist): Require dom C/N to be specified.
	
2002-05-31  Per Abrahamsen  <abraham@dina.kvl.dk>

	* organic_matter.C (dom): New member. 
	(total_N, total_C, output, mix, swap, initialize, load_syntax): Use it.

	* Version 2.32 released.

2002-05-31  Per Abrahamsen  <abraham@dina.kvl.dk>

	* om.C, om.h (goal_C_per_N): New public member function.
	(tock): Use it.
	* organic_matter.C (tick): Use it.

2002-05-30  Per Abrahamsen  <abraham@dina.kvl.dk>

	* om.C, om.h (add): Removed unused function.
	* am.C (add): Remove unused caller.

	* organic_matter.C (tick): Update caller.
	(om_compare): Ditto.
	(initialize): Ditto.

	* om.h, om.C (N, C_per_N): Use N instead of C_per_N.
	Update callers.
	* am.C (initialize): Ditto.

	* options.h, options.C (timestamp): Removed.
	* main.C (main): Update caller.

	* all: Fixed lots of BCC warnings.

	* mathlib.h (finite): Moved here from `common.h'.

	* Version 2.31 released.

2002-05-30  Per Abrahamsen  <abraham@dina.kvl.dk>

	* nrutil.C, nrutil.h (nrerror): Promise not to touch the string.

	* mathlib.h (double2int, int2double, int2char): New functions.
	* all: Use them instead of casts.

	* crop.h, crop.C, crop_simple.C, crop_old.C, crop_sold.C,
	crop_std.C (initialize_organic, initialize_inorganic):  Renamed
	from overloaded `initialize'.
	* vegetation_crops.C (sow): Update caller.
	(initialize): Ditto.

	* log.h, log_select.h, log_select.C, log_clone.h, log_clone.C,
	log_table1.C, log_alist.h, log_harvest.C (check_member): Renamed
	from `check'.  
	* column_std.C (output_inner): Update caller.
	* action_lisp.C, bioincorporation.C, crop_old.C, crop_sold.C,
	om.C, organic_matter.C, soil_chemicals.C, soil_chemicals.C,
	soil_heat.C (output): Update callers. 
	* log.C (check_entry): Update caller.
	* log_select.C (check_derived): Ditto.

	* horizon.C (initialize): Remove old style casts.
	* parser_file.C (get_number): Ditto.
	* soil_heat.C (output): Ditto.
	* lexer_data.C (get_number): Ditto.
	* geometry.C (initialize_zplus): Ditto.
	* select_average.C (done): Ditto.
	* crop_simple.C (check_alist): Ditto.
	* parser_file.C (load_list): Ditto.

2002-05-29  Per Abrahamsen  <abraham@dina.kvl.dk>

	* path.h, path.C (Input, Output): New classes.
	* printer_file.C (PrinterFile): Can now be constructed from an
	ostream reference.
	(print_plf): Attempt to wrap at 72 columns.
	* printer_file.C, printer_file.h, printer.h (print_alist): Add
	`super' agrument.
	* qmain.C (save_file): Update caller.
	* log_checkpoint.C (done): Ditto.
	* cdaisy.C, cdaisy.h (daisy_printer_alist): Ditto.
	* document_LaTeX.C (is_submodel, find_submodel): New utility
	functions. 
	(print_entry_type): Use them.
	(print_entry_type): Drop `size' argument.
	(print_entry_value): Also print complex default values. 
	(print_users): Get rid of "@" in references.

2002-05-28  Per Abrahamsen  <abraham@dina.kvl.dk>

	* transport_convection.C (tick): Allow for more noise in mass
	balance check..
	Initialize of J after time step reduction.

2002-05-24  Per Abrahamsen  <abraham@dina.kvl.dk>

	* column_base.C (initialize): Add treelog nesting.

	* treelog.C, treelog.h, treelog_dual.C, treelog_dual.h (debug):
	New virtual member function.
	* geometry.C (initialize_zplus): Use it.

	* Version 2.30 released.

2002-05-23  Per Abrahamsen  <abraham@dina.kvl.dk>

	* treelog.h, treelog_dual.h, treelog_dual.C, treelog_stream.h,
	treelog_stream.C (flush):  New virtual member function.
	* assertion.C (failure): Use it.

	* assertion.C, assertion.h: New utility.
	* Makefile (OTHER): Added it.
	* main.C (main): Register treelog.
	* all:  Use `daisy_assert' instead of `assert'.


2002-05-22  Per Abrahamsen  <abraham@dina.kvl.dk>

	* Version 2.29 released.

2002-05-22  Per Abrahamsen  <abraham@dina.kvl.dk>

	* om.C, om.h (water_factor, heat_factor): Fixed initialization
	bug. 

	* macro_std.C (height_start, height_end): Made them optional.
	(check_alist): New checks.
	* txt/tutorial.tex (subsection{Macropores}): Updated.

	* om.C (tock): Spelling fix in comment.

2002-05-21  Per Abrahamsen  <abraham@dina.kvl.dk>

	* Version 2.28 released.

2002-05-16  Per Abrahamsen  <abraham@dina.kvl.dk>

	* action_tillage.C (ActionMixSyntax): Fix default value for
	penetration (used to be 0 for some reason). 

2002-05-15  Per Abrahamsen  <abraham@dina.kvl.dk>

	* organic_matter.C (find_abiotic): New functions.
	(tick): Use it.

2002-05-14  Per Abrahamsen  <abraham@dina.kvl.dk>

	* om.h, om.C (heat_factor, water_factor): New parameters.
	(heat_turnover_factor, water_turnover_factor): New member functions.

	* production.C (initialize): Added assertions.
	* organic_matter.C (add): Check that we don't add the same am twice.
	* crop_std.C (tick): Only add am pools to organic matter if
	newly created.
	* vegetation_crops.C (sow): Add error for duplicate crops.

2002-05-08  Per Abrahamsen  <abraham@dina.kvl.dk>

	* lib/chemistry.dai: Update all parameterizations.

	* chemicals.C (canopy_update): New formula.
	* chemical_std.C (canopy_washoff_coefficient): Update dimension. 

2002-05-07  Per Abrahamsen  <abraham@dina.kvl.dk>

	* crop_std.C (harvest): Also cut back development stage for old
	crops who are low for some reason (like lack of WStem).

2002-05-06  Per Abrahamsen  <abraham@dina.kvl.dk>

	* root_system.C, root_system.h (water_uptake): New `day_fraction'
	parameter.
	* crop.h, crop_std.C, crop_simple.C, crop_old.C, crop_sold.C
	(ActualWaterUptake): Ditto.
	* vegevegetation.h, vegetation_crops.C, vegetation_permanent.C
	(transpiration): Ditto. 
	* bioclimate_std.C (WaterDistribution): Update caller.

	* root_system.C, root_system.h (water_stress_days): New state
	variable. 
	* root_system.C (water_uptake): Update it.
	* lib/log.dai ("Crop Production"): Log it.

2002-05-03  Per Abrahamsen  <abraham@dina.kvl.dk>

	* Version 2.27 released.

2002-05-03  Per Abrahamsen  <abraham@dina.kvl.dk>

	* cdaisy.C, options.h: Initialize path.

	* Makefile, qmain_edit.h, qmain_edit.C, qmain.h, qmain_tree.h,
	qmain_busy.h, qmain_moc.C, qmain_populate.h, qmain_item.h,
	qmain_item.C, qmain_populate.C, qmain_edit_moc.C, qmain.C: Port to
	new Qt and GCC and GNU/Linux.

2002-05-02  Per Abrahamsen  <abraham@dina.kvl.dk>

	* geometry.C (add): New function overload.

2002-04-25  Per Abrahamsen  <abraham@dina.kvl.dk>

	* lib/log.dai ("N Balance", "Carbon Balance"): Added residuals.
	* column_base.h, column_base.C (residuals_DM, residuals_N_top,
	residuals_C_top, residuals_N_soil, residuals_C_soil): New log
	variables. 
	* crop_sold.C, crop_old.C, crop_std.C, crop_simple.C, crop.h
	(harvest): Take residuals arguments.
	* harvesting.C (operator ()): Ditto.
	* vegetation_crops.C, vegetation_permanent.C, vegetation.h
	(harvest): Ditto.
	* column_base.C (harvest): Ditto.
	* production.C, production.h (tick): Ditto.
	* crop_sold.C, crop_old.C, crop_std.C, crop_simple.C, crop.h
	(tick): Ditto. 
	* vegetation_crops.C, vegetation_permanent.C, vegetation.h
	(tick): Ditto.
	* column_inorganic.C, column_std.C (tick): Ditto.
	* crop.C (kill): Ditto.
	* vegetation_crops.C, vegetation_permanent.C, vegetation.h
	(kill_all): Ditto. 


	* harvesting.C (operator ()): Add stub to residuals after
	harvest. 
	Add some mass balance checks.

2002-04-23  Per Abrahamsen  <abraham@dina.kvl.dk>

	* mactrans_std.C (tick): Allow transport of smaller quantities
	(pesticides).
	(tick): Fix BCC warning.

2002-04-22  Per Abrahamsen  <abraham@dina.kvl.dk>

	* chemicals.C, chemicals.h (canopy_dissipate, canopy_out,
	cleanup): Merged into `canopy_update'.
	* bioclimate_std.C (ChemicalDistribution): Update caller.

2002-04-09  Per Abrahamsen  <abraham@dina.kvl.dk>

	* macro_std.C (tick): Allow macropores to go below the lowest node.

2002-04-08  Per Abrahamsen  <abraham@dina.kvl.dk>

	* Version 2.26 released.

2002-04-06  Per Abrahamsen  <abraham@dina.kvl.dk>

	* organic_matter.C (total_C, total_N): Fix dimensions.
	* units.C (multiply): Added entries.
	(standard_conversions): Ditto.
	* lib/log.dai ("Total Soil Content"): Added more specs.
	("Soil NO3-N Concentration"): Ditto.
	("Soil Temperature"): Ditto.
	("Soil Water Potential"): Ditto.
	("Soil Water Sink"): Ditto.

2002-04-03  Per Abrahamsen  <abraham@dina.kvl.dk>

	* geometry.C, geometry.h (initialize_zplus): New function.
	* soil.C, soil.h (initialize): New function.
	* column_base.C (initialize): Call it.
	* geometry.C (zplus): Made it optional.
	
2002-04-02  Per Abrahamsen  <abraham@dina.kvl.dk>

	* library.C (is_derived_from): Return true if a == b.

2002-03-26  Per Abrahamsen  <abraham@dina.kvl.dk>

	* units.C, units.h (get_convertion, multiply): New functions.
	* select.h, select.C, select_interval.C (default_dimension): New
	virtual member function.
	* select_value.C, select_value.h: New helper class.
	* select_number.C: Use it.
	* select_min.C: Use it.
	* select_max.C: Use it.
	* select_index.C: Use it.
	* select_flux_top.C: Use it.
	* select_flux_bottom.C: Use it.
	* select_content.C: Use it.
	* Makefile (MODELS, REMOVE): Removed select_flux.C.
	* select.C, select.h (convert): New function.
	(dimension, tag): Ditto.
	* select.C, select.h (dimension, tag): Moved parameters to impl.
	(factor, offset): Ditto.

2002-03-25  Per Abrahamsen  <abraham@dina.kvl.dk>

	* alist.C (check): New char* variant for the sake of BCC 5.0.

2002-03-25  Per Abrahamsen  <abraham@dina.kvl.dk>

	* Version 2.25 released.

2002-03-25  Per Abrahamsen  <abraham@dina.kvl.dk>

	* transform_equil.C (TransformEquilibriumSyntax): Added checks.
	(TransformEquilibriumSyntax): Removed order.
	* surface.C (load_syntax): Added checks.
	* denitrification.C (load_syntax): Added checks.
	* om.C (turnover_halftime): New parameter.
	* organic_matter.C (Buffer::turnover_halftime): New parameter.
	(Buffer::load_syntax): Added range checks.
	(load_syntax): Ditto.
	* chemical_std.C (canopy_dissipation_halftime): New parameter.
	(decompose_halftime): Ditto.
	* lib/chemistry.dai (Bentazon, IPU, MCPP): Use it.

2002-03-22  Per Abrahamsen  <abraham@dina.kvl.dk>

	* chemical_soil.C, chemical.h (canopy_dissipation_rate): Dropped
	trailing coefficent.
	* chemicals.C (canopy_dissipate): Update caller.

	* chemical_soil.C (lag_increment): Moved from here.
	* chemical.h, chemical_std.C (decompose_lag_increment): Moved to here. 
	
	* txt/tutorial.tex (Defining New Pesticides): New subsubsection. 

	* chemical_std.C (ChemicalStandardSyntax): Narrow range check for
	`canopy_dissipation_rate_coefficient'. 

2002-03-21  Per Abrahamsen  <abraham@dina.kvl.dk>

	* Version 2.24 released.

2002-03-21  Per Abrahamsen  <abraham@dina.kvl.dk>

	* Version 2.23 released.

2002-03-21  Per Abrahamsen  <abraham@dina.kvl.dk>

	* txt: Added directory and content to cvs. 

	* average.C (description): Doc fix.
	* crop_sold.C (CropSoldSyntax): Ditto.

	* Version 2.22 released.

2002-03-21  Per Abrahamsen  <abraham@dina.kvl.dk>

	* soil.C, soil.h (K): Take new T argument, and use for
	manipulating water viscosity.
	* ridge.C (initialize): Update caller.
	* soil_water.C (MaxExfiltration): Update caller.
	* soil_water.C, soil_water.h (MaxExfiltration): Take new T
	argument. 
	* surface.C (tick): Update caller.
	* surface.C, surface.h (tick) Take new soil_T argument.
	* bioclimate_std.C (WaterDistribution): Update caller.
	* groundwater_pipe.C (EquilibriumDrainFlow): Update caller.
	(EquilibriumDrainFlow) Take new soil_heat argument.
	(update_water): Update caller.
	* groundwater_pipe.C, groundwater.C, groundwater.h (update_water):
	Take new soil_heat argument. 
	* soil_water.C (tick): Update caller.
	* soil_water.C, soil_water.h (tick): Take new soil_heat argument.
	* column_inorganic.C, column_std.C (tick): Update callers.
	* uzrichard.C (richard): Update caller.
	(richard): Take new soil_heat argument.
	(internode): Update caller.
	(internode): Take new soil_heat argument.
	(tick): Update caller.
	* uzrichard.C, uznone.C, uzlr.C, uzmodel.h (tick): Take new
	soil_heat argument. 
	* soil_water.C (tick): Update caller.

2002-03-20  Per Abrahamsen  <abraham@dina.kvl.dk>

	* Version 2.21 released.

2002-03-20  Per Abrahamsen  <abraham@dina.kvl.dk>

	* traverse.C, traverse.h (traverse_all_submodels): New function.
	* submodel.C, submodel.h (registered): New static member function.
	* xref.C, xref.h: New utility.
	* Makefile (OTHER): Added it.
	* document.h (Document): Use it.
	* document_LaTeX.C, document.h (print_users): New function.
	* document.C (print_component): Call it.
	(print_model, print_fixed): Ditto.

2002-03-19  Per Abrahamsen  <abraham@dina.kvl.dk>

	* column_base.C (check): Remove duplicate declaration of ok.

	* Version 2.20 released.

2002-03-19  Per Abrahamsen  <abraham@dina.kvl.dk>

	* lib/log.dai (AOM): Made it hourly.
	("AOM Pools", "Organic Matter"): New parameterizations.
	

	* am.C (output): Output `om' as ordered list.
	* lib/log.dai ("Total Soil Content", "N Balance") Fix users.
	(Bioincorporation, AOM, "Carbon Balance"): Ditto.

	* log.h, log.C, log_select.C, log_select.h, select.C, select.h,
	am.C: Removed Log::Maybe, open_maybe and close_maybe.
	* lib/log.dai (AOM, Bioincorporation): Fixed users.

	* log.h (open_named_entry, close_named_entry): New abstract
	virtual member functions.
	* log_select.h, log_select.C: Implemented them.
	* log_harvest.C: Ditto.
	* log_table1.C: Ditto.
	* log_alist.h, log_alist.C: Ditto.
	* log.h (NamedEntry): New member class.
	* organic_matter.C (output): Use it.
	* log.h (Entry): New member class.
	(output_list): Use it.
	* field.C (output): Use it.
	* log.h (Derived): New member class.
	(output_derived): Use it.
	* log.h (AList): New member class.
	* soil_chemicals.C (mix): Use it.
	* log.h (Geo): New member class.
	* column_base.C (output): Use it.
	* log.h (Open): New member class.
	(output_submodule, output_list, output_named, output_ordered,
	output_vector): Use it.
	* action_lisp.C (ActionCond::output): Use it..
	* cropold.C, cropsold.C (output): Use it.
	
2002-03-18  Per Abrahamsen  <abraham@dina.kvl.dk>

	* am.h, am.C (real_name): New function.
	* organic_matter.C (output): Use it.

	* select.h, select.C, select_array.C (prevent_printing): New
	virtual member function.
	* log_table.C (done): Use it.
	* lib/log-old.dai ("Soil Chemical"): Moved from `log.dai'.
	("Chemical"): Ditto.

	* log.h (Named, open_named, close_named, output_named): Support
	lists of named items.
	(Ordered, open_ordered, close_ordered, output_ordered): Support
	lists of ordered items.
	* soil_chemicals.C (output): Use it.
	* chemicals.C (output): Use it.
	* lib/log.dai ("Surface Chemicals", "Soil Chemicals",
	"Chemicals"): Updated.

	* Version 2.18 released.

2002-03-18  Per Abrahamsen  <abraham@dina.kvl.dk>

	* Makefile (OTHER): Removed message.C

2002-03-15  Per Abrahamsen  <abraham@dina.kvl.dk>

	* treelog.C, treelog.h (message, warning, error): New virtual
	members.
	* treelog_dual.C, treelog_dual.h: New utility.
	* Makefile (OTHER): Added it.
	* main.C (main): Use it.
	* all: Take treelog argument.

2002-03-14  Per Abrahamsen  <abraham@dina.kvl.dk>

	* Version 2.17 released.

2002-03-14  Per Abrahamsen  <abraham@dina.kvl.dk>

	* lib/log.dai ("Chemical"): Fix dimension.
	("Chemicals"): New parameterization.

2002-03-12  Per Abrahamsen  <abraham@dina.kvl.dk>

	* soil_chemicals.C (find): Add to 'all'.

	* lib/chemistry.dai (solid): Obey range checks.

	* chemical_std.C (ChemicalStandardSyntax): Added range checks.

	* partition.h (Root, Leaf, Stem, RSR): Made them non-references.

	* librarian.h (Librarian, ~Librarian): Pointless change in
	handling content.

	* action_irrigate.C: Fix memory leak.

2002-03-11  Per Abrahamsen  <abraham@dina.kvl.dk>

	* library.C (~Implementation): More agressive cleanup.

	* organic_matter.C, organic_matter.h (initialize): New 'Treelog'
	argument. Use it.
	Fix SMB from SOM substraction.

	* lib/*.dai (LAIDist0): Fixed for new crops.

	* library.C (Implementation::all_count): New variable.
	(Implementation) Increment.
	(~Implementation) Decrement and delete all when zero.

	* common.h (map_delete): New template.
	* syntax.C (~Implementation): Use it.
	* soil_chemicals.C (~Implementation): Use it.
	* log_extern.C (~LogExternSource): Use it.
	* units.C (~Content): Use it.

	* log_extern.C (LogExternSource): Delete log_extern_map members.

	* root_system.C (~RootSystem): Delete rootdens.

	* svat_pmsw.C (tick): Commented out some code that used unused
	variables, and set variables not used afterwards.
	(SVAT_PMSW): Gave dummy values to some variables that are used,
	but not set.

2002-03-10  Per Abrahamsen  <abraham@dina.kvl.dk>

	* groundwater_pipe.C (RaisingGWT): Added assertions.

	* snow.C (Snow): Delete impl.
	* transform_equil.C (~TransformEquilibrium): New function.
	* equil_langmuir.C (~EquilibriumLangmuir): New function.
	* am.C (~AM): Remove bogus assertion.
	(~Implementation): Delete lock.
	* select.C (Select): Delete impl.
	(~Implementation): Delete spec.
	* field.C (Field): Delete impl.
	* soil_water.C (SoilWater): Delete reserve and bottom.
	* solute.C (Solute): Delete last_resort.

	* svat_pmsw.C (SVAT_PMSW): Initialise pstress.
	Reorder initializations.

	* librarian.h (map_create): Return value, not reference.
	(map_create_const, map_construct, map_construct_const): Ditto.
	* action_activity.C: Fix caller.
	* action_lisp.C (ActionProgn::action): Ditto.
	* action_while.C (ActionWhile::actions): Ditto.
	* action_with.C: Ditto.
	* condition_logic.C (ConditionOr::conditions): Ditto.
	(ConditionAnd::conditions): Ditto.
	* daisy.h, daisy.C (Daisy::logs): Ditto.
	(Daisy::harvest): Ditto.

	* action_lisp.C (~ActionCond, ~ActionIf): Remove CONST_DELETE
	condition. 
	* condition_logic.C (~ConditionOr, ~ConditionAnd): Ditto.

	* action_lisp.C (~ActionCond): Delete actions.
	* action_with.C (~ActionWithColumn): Delete actions.
	* column_base.C (ColumnBase): Delete transformations.
	* organic_matter.C (~Implementation): Delete am, smb, and som.
	
2002-03-09  Per Abrahamsen  <abraham@dina.kvl.dk>

	* lib/log-old.dai, lib/log.dai ("N Balance 0-100 cm"): Moved. 
	("Monthly N Balance 100 cm"): Ditto.
	("Soil Chemicals 0-100 cm"): Ditto.
	("Soil Chemical 0-100 cm"): Ditto.

	* lib/log.dai ("Soil Chemicals"): Made hourly.
	("Soil Chemical"): Ditto.

	* select_date.C (SelectDateSyntax): Fix memory leak.
	* chemicals.C (add_syntax): Ditto.
	* library.C (Library): Ditto.
	* soil_chemical.C (load_syntax): Ditto.
	* action_lisp.C (ActionLispSyntax): Ditto.
	* crop_old.C (CropOldSyntax): Ditto.
	* crop_sold.C (CropSoldSyntax): Ditto.
	* horizon.C (load_syntax): Ditto.
	* soil_NH4.C (load_syntax): Ditto.
	* soil_NO3.C (load_syntax): Ditto.
	* bioclimate_std.C (BioclimateStandardSyntax): Ditto.
	* alist.C (add): Ditto.

2002-03-08  Per Abrahamsen  <abraham@dina.kvl.dk>

	* lib/log.dai, lib/log-old.dai ("Soil Nitrate Concentration",
	"Soil Water NO3 Concentration", "Root Zone Water Balance 0-100
	cm"): Moved. 
	* lib/log.dai ("Soil NO3 Concentration", "Soil NO3-N
	Concentration"): New parameterizations.
	("Root Zone Water Balance", "N Balance"): Made it hourly.

	* uzrichard.C (q_darcy): Cleanup error messages.

	* ridge.C (update_water): Better error message if hydraulic
	properties are not uniform within ridge.

	* Version 2.16 released.

2002-03-08  Per Abrahamsen  <abraham@dina.kvl.dk>

	* production.h, production.C (RtDR_T_factor): New parameter.

2002-03-07  Per Abrahamsen  <abraham@dina.kvl.dk>

	* lib/log-old.dai, lib/log.dai. ("Hourly Water Flux", "Daily Water
	Flux"): Moved to `log-old.dai'.
	* lib/log.dai ("Soil Temperature", "Surface Water Balance"): Made
	it hourly. 
	("Preferential Water Flux"): Store in `pref_water_flux.dlf'.  Fix
	deminesion. 
	("Matrix Water Flux"): New model.
	("Surface Water Balance"): 

	* weather_std.C (PrecipCorrect): New keyword.

	* Version 2.15 released.

2002-03-07  Per Abrahamsen  <abraham@dina.kvl.dk>

	* lib/all.dai: New file.
	* lib/Makefile (TEXT): Added it.

2002-03-06  Per Abrahamsen  <abraham@dina.kvl.dk>

	* nitrification_soil.C (NitrificationSoilSyntax): Added range checks.
	* nitrification_solute.C (NitrificationSoluteSyntax): Ditto.

	* lib/log.dai: Changed sign for solute drainage.

2002-03-05  Per Abrahamsen  <abraham@dina.kvl.dk>

	* solute.C (tick): Added more assertions.
	(tick): Fixed bogus drainage calculation.

	* transport_cd.C (tick): Reset M when lowering timestep.

	* mactrans_std.C, mactrans.h (tick): Added `M' parameter.

	* solute.C (last_resort): Transport model if reserve fails.

	* transport_convection.C (tick): Decrease timestep if we get
	negative values.

2002-03-04  Per Abrahamsen  <abraham@dina.kvl.dk>

	* library.C, library.h (is_derived_from, base_model): New member
	functions. 
	* document.C (ModelCompare): New class.
	(print_component): Use it.
	* document_LaTeX.C (print_index): New function.
	(print_model_header): Use it.
	(print_fixed_header): Use it.
	(print_component_header): Use it.
	(print_submodel_entry): Use it.
	(print_entry_category): Don't print index here.
	* document_LaTeX.C, document.h: (print_parameterization_header(
	(print_parameterization_file) 
	(print_parameterization_no_file) 
	(print_parameterization_description) 
	(print_parameterization_trailer): New virtual functions.
	* document.C (print_model): Use them.

	* options.C (Options): Don't run simulation if we printed a manual.

	* organic_matter.C (tick): Allow zero NH4 or NO3.

2002-03-03  Per Abrahamsen  <abraham@dina.kvl.dk>

	* select.C (Spec): New member.

	* library.C, library.h (exist): New function.

	* lib/log.dai ("Total Soil Content"): Gave it a description and
	made it hourly. 

2002-03-01  Per Abrahamsen  <abraham@dina.kvl.dk>

	* lib/crop-old.dai: New file..
	* lib/crop.dai: Moved old V1 crop parameterizations to
	crop/old.dai. 
	* lib/log-old.dai: New file.
	* lib/Makefile (DAISY): Added them.

	* net_radiation.C (NetRadiationSyntax): Spelling error.

	* units.C (standard_conversions): Added convertions used by
	`weather_std.C'. 
	* weather_std.C: Converted to use `units.h'.

2002-02-28  Per Abrahamsen  <abraham@dina.kvl.dk>

	* parser_file.C (get_string): Ignore escaped newlines, and let \n
	mean newline.

	* lib/maize.dai ("Pioneer Maize"): Renamed from "Maize Pioneer".

2002-02-27  Per Abrahamsen  <abraham@dina.kvl.dk>

	* action_fertilize.C (ActionFertilizeSyntax): Added range checks.

	* soil_water.C, soil_water.h (content): New function.
	* column_base.C, column_base.h, column.h (soil_water_content): New
	function. 
	* field.C, field.h (soil_water_content): New function.
	* condition_soil.C (ConditionSoilWater): New condition. 

2002-02-26  Per Abrahamsen  <abraham@dina.kvl.dk>

	* lib/chemistry.dai (Pendimethalin): New chemical.

	* lib/fertilizer.dai (cattle_slurry): Updated.
	(pig_slurry): Updated.
	(cattle_manure): New.
	(pig_manure): New.
	(horse_manure): New.

	* lib/rye.dai ("Rye"): Update from hsv.
	* lib/sugarbeet.dai ("Sugar Beet"): Ditto.
	* lib/srape.dai ("Spring Rape"): Ditto.
	* lib/potato.dai: New file.
	* lib/Makefile (NEWCROPS): Added it.
	* lib/crop.dai: Input it.
	* lib/maize.dai ("Maize"): Use "Roskilde" parameterizations.
	("Maize Pioneer"): Renamed from "Maize".

2002-02-24  Per Abrahamsen  <abraham@dina.kvl.dk>

	* am.C (AM_Syntax): Use `add_fraction' for "first_year_utilization".

2002-02-23  Per Abrahamsen  <abraham@dina.kvl.dk>

	* Version 2.14 released.

2002-02-23  Per Abrahamsen  <abraham@dina.kvl.dk>

	* solute.C (tick): Fix check for mass balance.

2002-02-22  Per Abrahamsen  <abraham@dina.kvl.dk>

	* solute.C (tick): Don't give mass balance errors if transported
	mass is 10 orders of magnitude smaller than total mass.

	* mactrans_std.C (tick): Fix bug that prevented macropores from
	being activated. 
	Made mass balance check work for low conetrations as well.

2002-02-21  Per Abrahamsen  <abraham@dina.kvl.dk>

	* Version 2.12 released.

2002-02-21  Per Abrahamsen  <abraham@dina.kvl.dk>

	* mactrans_std.C (tick): Made it more robust.

	* production.C (tick): Substract ReMobilResp from CH2OPool.

	* Version 2.11 released.

2002-02-21  Per Abrahamsen  <abraham@dina.kvl.dk>

	* transport_cd.C: Decrease timestep if we get negative results.
	* solute.C: Added reserve transport model.
	(tick): Added checks.

2002-02-20  Per Abrahamsen  <abraham@dina.kvl.dk>

	* hydraulic_Cosby.C (initialize): Use pow (10, x), not exp (x) for
	K_sat and h_b.

	* om.C (tick): Really fix the mass balance bug.

2002-02-19  Per Abrahamsen  <abraham@dina.kvl.dk>

	* Version 2.10 released.

2002-02-19  Per Abrahamsen  <abraham@dina.kvl.dk>

	* om.C (tick): Fixed mass balance error.

	* organic_matter.C (total_N, total_C): New functions.
	(tick): Added mass balance check.

2002-02-18  Per Abrahamsen  <abraham@dina.kvl.dk>

	* macro_std.C (MacroStandardSyntax): Added checks.

	* groundwater_pipe.C (GroundwaterPipeSyntax): Added checks.

	* Version 2.09 released.

2002-02-16  Per Abrahamsen  <abraham@dina.kvl.dk>

	* harvesting.h (DSnew): Made it public.
	* harvesting.C 	(load_syntax): Made it optional.
	(operator ()): Don't set DS to DSnew here.
	(load_syntax): Added range checks to DSmax and DSnew.
	* plf.C, plf.h (inverse_safe): New function.
	* canopy_std.C, canopy_std.h (DS_at_height): New function.
	* crop_std.C (harvest): Call it.

2002-02-15  Per Abrahamsen  <abraham@dina.kvl.dk>

	* document_LaTeX.C (print_entry_category): Add index.
	* Makefile (txt/reference/reference.dvi): Ditto.
	(txt/reference/reference.pdf): Ditto.

2002-02-09  Per Abrahamsen  <abraham@dina.kvl.dk>

	* column_base.C (ColumnBase, load_syntax): Made "Bioclimate"
	optional. 

	* bioclimate_std.C (BioclimateStandardSyntax): Fix minor memory leak.

2002-02-08  Per Abrahamsen  <abraham@dina.kvl.dk>

	* Version 2.08 released.

2002-02-07  Per Abrahamsen  <abraham@dina.kvl.dk>

	* hydraulic.C, hydraulic.h, hydraulic_Cosby.C (initialize): Take
	clay, sand and silt parameters instead of horizon.
	* horizon.C (Horizon): Update caller.

	* transport_cd.C (tick): Only complain if the error is above mg/ha
	in the root zone.

	* parser_file.C (convert): Added support for [%].
	(check_dimension): Ditto.

	* units.C (standard_conversions): Added "[d^-1]" -> "[h^-1]"
	conversion. 

	* groundwater_pipe.C (initialize): Fix 'Treelog::Open' nesting
	bug.  
	Added some assertions.

	* vernalization.C (output): Don't output if not required (need for
	checkpoints).
	* crop_std.C (output): Ditto.

	* hydraulic_Cosby.C (check_alist): Don't complain if 'Theta_sat'
	is specified, it will be after a checkpoint.

2002-02-06  Per Abrahamsen  <abraham@dina.kvl.dk>

	* Version 2.07 released.

2002-02-06  Per Abrahamsen  <abraham@dina.kvl.dk>

	* horizon.C (Implementation::hydraulic): Removed member.
	(DepolationsFactor): Take it as an argument.
	(ThermalConductivity): Update caller.
	(initialize): Update caller.

	* hydraulic_M_C.C (HydraulicM_CSyntax): Better range checking.
	* hydraulic_B_C.C (HydraulicB_CSyntax): Ditto.
	* hydraulic_mod_C.C (Hydraulic_mod_CSyntax): Ditto.

	* horizon.C (Horizon): Initialize 'hydraulic' before 'impl'.
	(~Horizon): Delete 'impl' and 'hydraulic'.

	* parser_file.C (load_list): Give error of 'directory' directive
	fails. 

2002-02-05  Per Abrahamsen  <abraham@dina.kvl.dk>

	* hydraulic.C (initialize): New virtual function.
	* horizon.C (Horizon): Call it.
	(silt, sand): New functions.
	(load_syntax): Gave SOM_C_per_N a default value (11 11).
	* hydraulic_Cosby.C: New model.
	* Makefile (MODELS): Added it.
	* horizon.C (load_syntax): Make it default.

2002-01-30  Per Abrahamsen  <abraham@dina.kvl.dk>

	* Version 2.06 released.

2002-01-30  Per Abrahamsen  <abraham@dina.kvl.dk>

	* horizon.C (load_syntax): Added checks.
	* soil.C (load_syntax): Added checks.
	* geometry.C (add_layer): Added check.
	(load_syntax): Ditto.

	* lexer.h, lexer.C (Lexer::Position): New class member.
	* lexer.h, lexer.C (error): Use it.
	* parser_file.C (load_list, convert, get_number, error): Use it.


	* units.C, units.h: New utility.
	* Makefile (OTHER): Add it.
	* parser_file.C (check_dimention, convert): Use it.

2002-01-25  Per Abrahamsen  <abraham@dina.kvl.dk>

	* Version 2.05 released.

2002-01-24  Per Abrahamsen  <abraham@dina.kvl.dk>

	* pedo_linear.C: New model.
	* Makefile (MODELS): Added it.

	* Version 2.04 released.

2002-01-24  Per Abrahamsen  <abraham@dina.kvl.dk>

	* lib/log.dai ("N Balance"): Accumulate fixation.

2002-01-23  Per Abrahamsen  <abraham@dina.kvl.dk>

	* transform_equil.C (S_AB): New log variable.

	* soil.h, horizon.h, horizon.C (get_attribute, has_attribute): New
	member functions. 

	* mathlib.C (single_positive_root_of_square_equation): Fix error
	in caculating discriminant.

2002-01-22  Per Abrahamsen  <abraham@dina.kvl.dk>

	* Version 2.03 released.

2002-01-22  Per Abrahamsen  <abraham@dina.kvl.dk>

	* lib/log.dai ("Soil Chemical"): New log model.
	("Soil Chemical 0-100 cm"): Ditto.

	* parser_file.C (check_dimention): Use ? for entries with unknown
	syntax. 

	* adsorption_full.C: New model.
	* Makefile (MODELS): Added it.
	* solute.C (check_alist): New function.
	(load_syntax): Use it.
	* lib/chemistry.dai (solid): New parameterization.

2002-01-21  Per Abrahamsen  <abraham@dina.kvl.dk>

	* equil_langmuir.C: New model.
	* Makefile (MODELS): Added it.

2002-01-18  Per Abrahamsen  <abraham@dina.kvl.dk>

	* soil_chemicals.C, soil_chemicals.h (find): New function.
	* equil.h, equil.C: New component.
	* pedo.h, pedo.C: New component.
	* Makefile (COMPONENTS): Added them.
	* transform_equil.C: New model.
	* Makefile (MODELS): Added it.

2002-01-16  Per Abrahamsen  <abraham@dina.kvl.dk>

	* transform.h, transform.C: New component.
	* column_base.h, column_base.C: Use it.
	* Makefile (COMPONENTS): Added it.

	* condition_soil.C (ConditionSoilSyntax): Fixed dimension.

	* parser_file.C (get_dimension): New function.
	(get_number): New overloaded function.
	(check_dimention): New function.
	(convert): New function.
	(load_list): Use them.

2002-01-15  Per Abrahamsen  <abraham@dina.kvl.dk>

	* Version 2.02 released.

2002-01-15  Per Abrahamsen  <abraham@dina.kvl.dk>

	* column_base.C, column_base.h, column.h (daily_air_temperatur):
	New member function. 
	* field.C, field.h (daily_air_temperatur): New member function.
	* condition.h, condition.C (tick): New virtual member function.
	* condition_logic.C (ConditionOr::tick, ConditionAnd::tick,
	ConditionNot::tick, ConditionIf::tick): Define it.
	* action.h, action.C (tick): New virtual member function.
	* action_activity.C (tick): Define it.
	* action_crop.C (tick): Ditto.
	* action_lisp.C (ActionProgn::tick, ActionCond::tick,
	ActionIf::tick): Ditto.
	* action_message.C (tick): Ditto.
	* action_repeat.C (tick): Ditto.
	* action_wait.C (ActionWait::tick): Ditto.
	* action_while.C (tick): Ditto.
	* action_with.C (tick): Ditto.
	* daisy.C (tick): Call it.
	* log_checkpoint.C (match): Ditto.
	* log_select.C (match): Ditto.
	* log_table1.C (LogTable1::match, LogEntry::match): Dittto.
	* select.C (match): Ditto.
	* condition_weather.C (TSum): New model.

2001-12-12  Per Abrahamsen  <abraham@dina.kvl.dk>

	* Version 2.01 released.

2001-12-12  Per Abrahamsen  <abraham@dina.kvl.dk>

	* vegetation.C (load_syntax): Don't use "\(".
	* om.C (load_syntax): Ditto.
	* bioincorporation.C (load_syntax): Ditto.

	* librarian.h (class Librarian): Use 'make_pair' instead of
	'map_type::value_type'. 

2001-12-11  Per Abrahamsen  <abraham@dina.kvl.dk>

	* Makefile (MODELS): Added it.
	* rootdens_PLF.C: New file.

2001-12-05  Per Abrahamsen  <abraham@dina.kvl.dk>

	* Changelog.1: Renamed from Changelog.
	* Changelog: New file.
	* Makefile (TEXT): Added it.

